# =================================================================
# Core Services Environment Configuration
# =================================================================
# Used by `coreservices-homelab` only (Traefik, Vault, Logto, logto-db, backup/restore scripts).
# Copy to `.env` if needed, then run `./scripts/setup.sh` and `./scripts/start.sh`.

# =================================================================
# GENERAL
# =================================================================
TIMEZONE="America/Chicago"

# =================================================================
# LOGTO / AUTH
# =================================================================
# Public host exposed by Traefik rule.
LOGTO_PUBLIC_HOST="auth.local"

# App settings passed to the `logto` container.
LOGTO_APP_ID="logto"
LOGTO_APP_SECRET="$(openssl rand -base64 32 | tr -d '\n')"
LOGTO_HOST="0.0.0.0"
LOGTO_PORT="3001"
LOGTO_ENDPOINT="https://auth.local"

# Logto database credentials (used by both `logto` and `logto-db`).
LOGTO_DB_USER="logto"
# Use URL-safe chars for password because it is embedded in DB_URL.
LOGTO_DB_PASSWORD="$(openssl rand -hex 24)"
LOGTO_DB_NAME="logto_db"
LOGTO_DB_HOST="logto-db"

# Database URL used by Logto.
LOGTO_DATABASE_URL="postgres://${LOGTO_DB_USER}:${LOGTO_DB_PASSWORD}@${LOGTO_DB_HOST}:5432/${LOGTO_DB_NAME}"

# Logto database alteration target version.
LOGTO_ALTERATION_TARGET_VERSION="1.36.0"

# Auto-seed base schema on start when missing (1=enabled, 0=disabled).
LOGTO_DB_SEED_ON_START="1"

# `svhd/logto` expects DB_URL.
DB_URL="${LOGTO_DATABASE_URL}"

# =================================================================
# VAULT
# =================================================================
# Used by CLI and scripts for convenience.
VAULT_ADDR="http://127.0.0.1:8200"

# =================================================================
# BACKUP / RESTORE
# =================================================================
BACKUP_LOCATION="$HOME/coreservices-backups"

# =================================================================
# OPTIONAL HARDENING NOTES
# =================================================================
# - Replace CHANGEME values before exposing services.
# - For production: enable TLS for Vault and Traefik cert management.
# - Consider external Postgres for Logto and Vault auto-unseal.

